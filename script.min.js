const canvas=document.getElementById("myCanvas"),ctx=canvas.getContext("2d"),chooseImage=document.querySelector(".choose-image"),save=document.getElementById("save-button"),clear=document.getElementById("clear-button"),input=document.querySelector("input#tx");let tx,setImage="ma.jpg";const widthCanvas=1008,heightCanvas=630,ratio=1.6;chooseImage.addEventListener("click",e=>{e.stopPropagation(),setImage=e.target.getAttribute("src"),draw()});const setWidth=()=>{if(window.innerWidth<1008)return window.innerWidth},setHeight=ratio=>{if(window.innerWidth<1008)return window.innerWidth/ratio},setCanvasDimentions=()=>{canvas.width=setWidth()||1008,canvas.height=setHeight(1.6)||630};setCanvasDimentions(),window.addEventListener("resize",()=>{setCanvasDimentions(),draw()}),input.addEventListener("input",e=>{e.preventDefault(),tx=e.target.value,draw()}),clear.addEventListener("click",e=>{e.preventDefault(),tx="",input.value="",draw()}),save.addEventListener("click",e=>{if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(canvas.msToBlob(),"tvp.jpg");else{const a=document.createElement("a");document.body.appendChild(a),a.href=canvas.toDataURL("image/jpg"),a.download="tvp.jpg",a.click(),document.body.removeChild(a)}});const draw=()=>{if(canvas.getContext){const img=new Image;img.onload=function(){ctx.drawImage(img,0,0,canvas.width,canvas.height),tx&&text(tx)},img.src=setImage}else console.log("ERROR")},text=tx=>{ctx.fillStyle="#fff",ctx.font="40px Arial",ctx.fillText(tx.toUpperCase(),canvas.width/5.2,canvas.height/1.227,canvas.width/1.4)};draw();